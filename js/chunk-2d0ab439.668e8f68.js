(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab439"],{1510:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"","pa-1":""}},[a("v-toolbar",{attrs:{color:"white",light:""}},[a("v-toolbar-title",[t._v("Level 2 Challenge: Improvement of the Year/Month Heatmap")]),a("v-spacer")],1)],1),a("v-flex",{attrs:{xs12:"","pa-1":""}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"title"},[t._v("Input Data: "+t._s(t.file))])]),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":"",outline:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-data-table",{attrs:{headers:t.headers,items:t.rawData,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.date))]),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.max_temperature))]),a("td",{staticClass:"text-xs-center"},[t._v(t._s(e.item.min_temperature))])]}}])})],1)],1)],1),a("v-flex",{attrs:{xs12:"","pa-1":""}},[a("v-card",[a("v-card-title",[a("div",[a("h3",{staticClass:"title mb-0"},[t._v("Year/Month Heatmap")]),a("v-label",[t._v("Display Value: "+t._s(t.displayProperty))]),a("br"),a("v-label",[t._v("Year Range: "+t._s(t.startYear)+" - "+t._s(t.endYear))]),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm5:"",md4:"","pa-1":""}},[a("v-text-field",{attrs:{label:"Start Year",outline:"",type:"number",min:"1900",step:"1",max:"2100"},model:{value:t.input.startYear,callback:function(e){t.$set(t.input,"startYear",e)},expression:"input.startYear"}})],1),a("v-flex",{attrs:{xs12:"",sm5:"",md4:"","pa-1":""}},[a("v-text-field",{attrs:{label:"End Year",outline:"",type:"number",min:"1900",step:"1",max:"2100"},model:{value:t.input.endYear,callback:function(e){t.$set(t.input,"endYear",e)},expression:"input.endYear"}})],1),a("v-flex",{attrs:{xs6:"",sm2:"",md3:"","pa-1":""}},[a("v-btn",{on:{click:t.changeYearRange}},[t._v("\n                                Apply\n                            ")])],1)],1)],1)]),a("v-card-actions",[a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.changeDisplayProperty("max_temperature")}}},[t._v("MAX Temperature")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.changeDisplayProperty("min_temperature")}}},[t._v("MIN Temperature")])],1),a("v-card-text",{ref:"heatMapContainer2"},[a("improved-temperature-heat-map",{attrs:{rawData:t.rawData,"display-property":t.displayProperty,startYear:t.startYear,endYear:t.endYear,height:t.container.height,width:t.container.width}})],1)],1)],1)],1)},n=[],i=a("e814"),s=a.n(i),l=(a("96cf"),a("3b8d")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"scroll"}})},o=[],u=(a("6b54"),a("28a5"),a("f499")),p=a.n(u),c=(a("c5f6"),{name:"ImprovedTemperatureHeatMap",data:function(){return{processedData:null,groupedData:null}},props:{rawData:{type:Array,required:!0},startYear:{type:Number,required:!0},endYear:{type:Number,required:!0},displayProperty:{type:String,required:!0},width:{type:Number,default:function(){return 500}},height:{type:Number,default:function(){return 500}},margin:{type:Object,default:function(){return{top:30,right:30,bottom:30,left:60}}}},watch:{displayProperty:function(){this.draw()},rawData:function(){this.draw()},startYear:function(){this.draw()},endYear:function(){this.draw()},width:function(){this.draw()},height:function(){this.draw()}},mounted:function(){this.draw(this.displayProperty)},methods:{validProps:function(){return!!(this.rawData.length>0&&this.startYear&&this.endYear)},draw:function(){var t=this;if(this.validProps()){var e=this.d3,a=this.lodash,r=this.margin,n=this.width,i=this.height,l=this.$el,d=n-r.left-r.right,o=i-r.top-r.bottom,u=JSON.parse(p()(this.rawData)),c=this.displayProperty,h=this.startYear,f=this.endYear;while(l.firstChild)l.removeChild(l.firstChild);var m=e.select(l).append("svg").attr("width",n).attr("height",i).append("g").attr("transform","translate("+r.left+","+r.top+")"),v=["January","February","March","April","May","June","July","August","September","October","November","December"],g=a.orderBy(u,["date"]);this.processedData=a.chain(g).groupBy(function(t){return t.date.split("-")[0]+"-"+t.date.split("-")[1]}).map(function(t,e){var a=Math.max.apply(Math,t.map(function(t){return t.max_temperature})),r=Math.min.apply(Math,t.map(function(t){return t.min_temperature}));return{date:e,max_temperature:a,min_temperature:r}}).value(),this.groupedData=a.groupBy(g,function(t){return t.date.split("-")[0]+"-"+t.date.split("-")[1]});for(var y=[],x=h;x<=f;x++)y.push(x.toString());var b=e.scaleBand().range([0,d-50]).domain(y).padding(.1);m.append("g").call(e.axisTop(b));var w=e.scaleBand().range([0,o]).domain(v).padding(.1);m.append("g").call(e.axisLeft(w));var _=["#2c7bb6","#00a6ca","#00ccbc","#90eb9d","#ffff8c","#f9d057","#f29e2e","#e76818","#d7191c"],Y=[0,40],D=e.scaleQuantize().domain(Y).range(_);e.select(".d3-tip").remove();var C=e.tip().attr("class","d3-tip").html(function(t){return"Date: "+t.date+"Max: "+t.max_temperature+" &#8451 Min: "+t.min_temperature+" &#8451"}),M=a.filter(this.processedData,function(e){return s()(e.date.split("-")[0])<=t.endYear&&s()(e.date.split("-")[0])>=t.startYear}),T=this;m.call(C),m.selectAll().data(M).enter().append("rect").attr("x",function(t){return b(t.date.split("-")[0])}).attr("y",function(t){return w(v[s()(t.date.split("-")[1])-1])}).attr("width",b.bandwidth()).attr("height",w.bandwidth()).style("fill",function(t){return D(t[c])}).on("mouseover",C.show).on("mouseout",C.hide);var k=15,V=Y.slice();V.unshift(null);var z=_.slice();z.unshift(null),m.append("g").attr("class","legend"),m.selectAll(".legend").data(z).enter().append("rect").attr("x",d-k-r.right).attr("y",function(t,e){return(e-1)*k}).attr("width",k).attr("height",k).style("fill",function(t,e){return z[e]}),m.selectAll(".legend").data(V).enter().append("text").attr("x",d-r.right+3).attr("y",function(t,e){return(e-1)*k*_.length+3}).attr("style","font-size:10px").html(function(t,e){return t+" &#8451"});var P=e.scaleBand().range([0,b.bandwidth()]).padding(.1),S=e.scaleBand().range([0,w.bandwidth()]).domain(a.range(40)).padding(.1),A=e.line().x(function(t,e){return P.domain(T.lodash.range(t.numOfDays)),P(e)}).y(function(t){return S(t.max_temperature)}),O=e.line().x(function(t,e){return P.domain(T.lodash.range(t.numOfDays)),P(e)}).y(function(t){return S(t.min_temperature)});m.selectAll().data(M).enter().append("g").attr("transform",function(t,e){var a={x:b(t.date.split("-")[0]),y:w(v[s()(t.date.split("-")[1])-1])+w.bandwidth()};return"translate("+a.x+","+a.y+") "}).append("g").append("path").attr("transform","scale(1,-1)").attr("fill","none").attr("stroke","blue").attr("stroke-width","2px").attr("d",function(e){var r=a.chain(t.groupedData[e.date]).map(function(a){return a.numOfDays=t.groupedData[e.date].length,a}).value();return A(r)}),m.selectAll().data(M).enter().append("g").attr("transform",function(t,e){var a={x:b(t.date.split("-")[0]),y:w(v[s()(t.date.split("-")[1])-1])+w.bandwidth()};return"translate("+a.x+","+a.y+") "}).append("g").append("path").attr("transform","scale(1,-1)").attr("fill","none").attr("stroke","#99b3ff").attr("stroke-width","2px").attr("d",function(e){var r=a.chain(t.groupedData[e.date]).map(function(a){return a.numOfDays=t.groupedData[e.date].length,a}).value();return O(r)})}}}}),h=c,f=a("2877"),m=Object(f["a"])(h,d,o,!1,null,null,null),v=m.exports,g={name:"level2",components:{ImprovedTemperatureHeatMap:v},data:function(){return{search:"",headers:[{text:"Date",value:"date",align:"center"},{text:"Max Temperature",value:"max_temperature",align:"center"},{text:"Min Temperature",value:"min_temperature",align:"center"}],rawData:[],file:"data/temperature_daily.csv",displayProperty:"max_temperature",startYear:2008,endYear:2017,input:{startYear:2e3,endYear:2017},container:{width:0,height:0},resizeID:null}},mounted:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.d3.csv(this.file);case 2:this.rawData=t.sent,window.addEventListener("resize",this.onResize),this.initContainerSize();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{changeDisplayProperty:function(t){this.displayProperty=t},changeYearRange:function(){this.startYear=s()(this.input.startYear),this.endYear=s()(this.input.endYear)},onResize:function(t){clearTimeout(this.resizeID),this.resizeID=setTimeout(this.initContainerSize,500)},initContainerSize:function(){this.container.width=this.$refs.heatMapContainer2.clientWidth,this.container.height=s()(.8*this.container.width)}}},y=g,x=a("6544"),b=a.n(x),w=a("8336"),_=a("b0af"),Y=a("99d9"),D=a("12b2"),C=a("8fea"),M=a("0e8f"),T=a("24c9"),k=a("a722"),V=a("9910"),z=a("2677"),P=a("71d9"),S=a("2a7f"),A=Object(f["a"])(y,r,n,!1,null,"2cff5b71",null);e["default"]=A.exports;b()(A,{VBtn:w["a"],VCard:_["a"],VCardActions:Y["a"],VCardText:Y["b"],VCardTitle:D["a"],VDataTable:C["a"],VFlex:M["a"],VLabel:T["a"],VLayout:k["a"],VSpacer:V["a"],VTextField:z["a"],VToolbar:P["a"],VToolbarTitle:S["b"]})}}]);
//# sourceMappingURL=chunk-2d0ab439.668e8f68.js.map